name: CI Test
run-name: >-
    ${{ 
        github.event_name == 'pull_request' 
        && format('Compilation CI Test for PR #{0} -> {1}', github.event.number, github.event.pull_request.title)
    }}
on:
    pull_request:
        types: [opened, synchronize, reopened]

permissions:
    contents: read

jobs:
    compilation-ci-test:
        name: Compilation - Testing
        runs-on: ubuntu-latest

        steps:
        - name: Checkout repository
          uses: actions/checkout@v5

        - name: Set up Go
          uses: actions/setup-go@v6
          with:
            go-version-file: 'go.mod'

        - name: Compilation Check
          run: |
            print_status() {
                if [ $1 -eq 0 ]; then
                    echo "✅ $2 - OK"
                else
                    echo "❌ $2 - ERROR"
                    exit 1
                fi
            }
            echo "Building all packages to verify compilation:"
            echo "----------------------------------------"
            go build -v -o /dev/null ./...
            print_status $? "Compilation check"
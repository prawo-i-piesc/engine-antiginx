name: AI Review (Go)

on:
  pull_request_target:
    types: [opened, reopened, synchronize, ready_for_review]
  
jobs:
  gemini_pr_review:
    if: ${{ github.event.sender.type != 'Bot' }}
    runs-on: ubuntu-latest

    permissions:
      contents: read
      pull-requests: write
      issues: write

    steps:
      - name: Start PR-Agent with Gemini
        uses: qodo-ai/pr-agent@v0.31

        env:
          GEMINI_KEY: ${{ secrets.GEMINI_API_KEY }}

        with:
          args: |
            --openai_model gemini-2.5-flash
            --pr_commands "/describe /review"
            --max_total_diff_tokens 1500
            --github_token ${{ secrets.GITHUB_TOKEN }}

